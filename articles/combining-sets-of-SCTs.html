<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Combining sets of SCTs • testwhat</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Combining sets of SCTs">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-120925561-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-120925561-1');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">testwhat</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">4.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/syntax.html">Syntax</a>
</li>
<li>
  <a href="../articles/glossary.html">Glossary</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/checking-objects.html">Checking objects</a>
    </li>
    <li>
      <a href="../articles/checking-function-calls.html">Checking function calls</a>
    </li>
    <li>
      <a href="../articles/checking-output.html">Checking output</a>
    </li>
    <li>
      <a href="../articles/checking-control-flow.html">Checking control flow</a>
    </li>
    <li>
      <a href="../articles/checking-function-definitions.html">Checking function definitions</a>
    </li>
    <li>
      <a href="../articles/checking-through-string-matching.html">Checking through string matching</a>
    </li>
    <li>
      <a href="../articles/combining-sets-of-SCTs.html">Combining sets of SCTs</a>
    </li>
    <li>
      <a href="../articles/checking-markdown-documents.html">Checking markdown documents</a>
    </li>
    <li>
      <a href="../articles/electives.html">Electives</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/test-to-check.html">Test to Check</a>
    </li>
    <li>
      <a href="../articles/extensions.html">Extensions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/datacamp/testwhat">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Combining sets of SCTs</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/datacamp/testwhat/blob/master/vignettes/combining-sets-of-SCTs.Rmd"><code>vignettes/combining-sets-of-SCTs.Rmd</code></a></small>
      <div class="hidden name"><code>combining-sets-of-SCTs.Rmd</code></div>

    </div>

    
    
<p>In R, there are many ways to solve a problem. Writing an SCT that checks when students make a mistake, but is robust to multiple different solutions is a challenge. <code>test_correct</code> and <code>test_or</code> allow you to add logic to your SCT. Instead of running all tests and failing as soon as one of the tests fail, you can conditionally execute tests, and interpret the results separately.</p>
<div id="example-1-test_correct" class="section level3">
<h3 class="hasAnchor">
<a href="#example-1-test_correct" class="anchor"></a>Example 1: <code>test_correct</code>
</h3>
<p>As an example, suppose you want the student to calculate the mean of a vector <code>vec</code> and store it in <code>res</code>. A possible solution could be:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># vec is predefined for you</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># Calculate result</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">result &lt;-<span class="st"> </span><span class="kw">mean</span>(vec)</a></code></pre></div>
<p>You want the SCT to pass when the student manages to store the correct value in the object <code>result</code>. How <code>result</code> was calculated, does not matter to you: as long as <code>result</code> is correct, the SCT should accept the submission. If something <code>result</code> is not correct, you want to dig a little deeper and see if the student used the <code>mean()</code> function correctly. The following SCT will do just that:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">test_correct</span>(<span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_object</span>(<span class="st">"result"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>(),</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">             {</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">               <span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_error</span>()</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">               <span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_function</span>(<span class="st">"mean"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_arg</span>(<span class="st">"x"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_equal</span>()</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">             })</a></code></pre></div>
<p>Notice that it’s perfectly possible to specify more than one SCT function call in the arguments as the second sub-SCT shows.</p>
<p>Let’s go over what happens when the student submits different versions of the fifth line of code in the solution:</p>
<ul>
<li>The student submits <code>result &lt;- mean(vec)</code>, exactly the same as the solution.
<ul>
<li>
<code>test_correct()</code> executes the first sub-SCT chain (<code>check_object()</code>)</li>
<li>This SCT chain passes, so the second sub-SCT chain is not executed.</li>
<li>The overall SCT passes.</li>
</ul>
</li>
<li>The student submits <code>result &lt;- sum(vec)/length(vec)</code>, which should be correct
<ul>
<li>
<code>test_correct()</code> executes the first sub-SCT chain</li>
<li>This SCT chain passes, so the second sub-SCT chain is not executed.</li>
<li>The overall SCT passes, even though <code>mean()</code> was not used.</li>
</ul>
</li>
<li>The student submits <code>result &lt;- mean(vec + 1)</code>.
<ul>
<li>
<code>test_correct()</code> executes the first sub-SCT chain.</li>
<li>This sub-SCT chain fails <em>silently</em>, so <code>test_correct()</code> heads over to the second, ‘diagnose’ sub-SCT chain (<code>check_function()</code> etc)</li>
<li>
<code>check_function()</code> will fail, because the parameter passed to <code>mean()</code> does not correspond to the argument passed in the solution.</li>
<li>The overall SCT fails, with a meaningful, specific feedback message: you did not correctly specify the argument inside <code>mean()</code>.</li>
</ul>
</li>
<li>The student submits <code>result &lt;- mean(vec) + 1</code>.
<ul>
<li>
<code>test_correct()</code> executes the first sub-SCT chain</li>
<li>This sub-SCT chain fails <em>silently</em>, so <code>test_correct()</code> heads over to the second, ‘diagnose’ sub-SCT chain (<code>check_function()</code> etc)</li>
<li>Both functions in the second sub-SCT chain pass, because <code>mean()</code> is called in exactly the same way in the student code as in the solution.</li>
<li>Because there is clearly something wrong - <code>result</code> is not correct - the ‘check’ sub-SCT, <code>ex() %&gt;% test_object("result")</code> is executed again, but <em>loudly</em> this time.</li>
<li>
<code>check_object()</code> fails <em>loudly</em> and the student gets the message that <code>result</code> does not contain the correct value.</li>
</ul>
</li>
</ul>
</div>
<div id="example-2-test_or" class="section level2">
<h2 class="hasAnchor">
<a href="#example-2-test_or" class="anchor"></a>Example 2: <code>test_or</code>
</h2>
<p>This function simply tests whether one of the sub-SCTs you specify inside it passes. If such as a sub-SCT is a single function, you can simply pass the function call as is. If you want to include multiple functions in a sub-SCT, use curly brackets (see previous example).</p>
<p>Suppose you want to check whether people correctly printed out any integer between 3 and 7. A solution could be:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">print</span>(<span class="dv">4</span>)</a></code></pre></div>
<p>To test this, you can use <code>test_or</code> with three separate <code>check_output_expr()</code> functions.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">test_or</span>(<span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_output_expr</span>(<span class="st">'4'</span>),</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">        <span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_output_expr</span>(<span class="st">'5'</span>),</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">        <span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_output_expr</span>(<span class="st">'6'</span>))</a></code></pre></div>
<p>If all of the SCTs that you pass fail, the feedback that the first sub-SCT generated is presented to the student. If you want to override the message that is shown if all sub-SCTs fail, you can manually specify <code>incorrect_msg</code> inside <code>test_or</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">test_or</span>(<span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_output_expr</span>(<span class="st">'4'</span>),</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">        <span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_output_expr</span>(<span class="st">'5'</span>),</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">        <span class="kw">ex</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">check_output_expr</span>(<span class="st">'6'</span>),</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">        <span class="dt">incorrect_msg =</span> <span class="st">"Just print out either 4, 5, or 6!"</span>)</a></code></pre></div>
<p>You can consider <code>test_or()</code> a logic-inducing function. The different calls to <code>testwhat</code> functions that are in your SCT are actually all tests that <em>have</em> to pass: they are <code>AND</code> tests. With <code>test_or()</code> you can add chunks of <code>OR</code> tests in there.</p>
</div>
<div id="why-use-it" class="section level2">
<h2 class="hasAnchor">
<a href="#why-use-it" class="anchor"></a>Why use it?</h2>
<p>You will find that <code>test_correct()</code> and <code>test_or()</code> are extremely powerful functions to allow for different ways of solving the same problem.</p>
<p>For example, you can use <code>test_correct()</code> to check the end result of a calculation. If the end result is correct, you can go ahead and accept the entire exercise. If the end result is incorrect, you can use the <code>diagnose_code</code> part of <code>test_correct()</code> to dig a little deeper. It is also perfectly possible to use <code>test_correct()</code> inside another <code>test_correct()</code>, to make things more advanced.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#example-2-test_or">Example 2: <code>test_or</code></a></li>
      <li><a href="#why-use-it">Why use it?</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Andreas Alfons, Filip Schouwenaars, Vincent Vankrunkelsven.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
